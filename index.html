<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœ¨å¤´çŒ« - å°æ¸¸æˆåˆé›†</title>
    <!-- PWA Meta Tags -->
    <meta name="description" content="A collection of classic games with modern web technologies">
    <meta name="keywords" content="games, classic games, web games, woodcat, tetris, snake, minesweeper, 2048">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Woodcat Games">
    <meta name="application-name" content="Woodcat Game Collection">
    <meta name="msapplication-TileColor" content="#3498db">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/favicon.svg" color="#3498db">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="preload" href="css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
    <noscript><link rel="stylesheet" href="css/style.css"></noscript>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <h1 data-i18n="site.title">æœ¨å¤´çŒ«</h1>
                    <p class="slogan" data-i18n="site.slogan">å‘ç°æœ‰è¶£çš„å°æ¸¸æˆ</p>
                </div>
                <div class="nav-container">
                    <nav class="nav">
                        <ul>
                            <li><a href="#" class="active" data-i18n="nav.home">é¦–é¡µ</a></li>
                            <li><a href="#games" data-i18n="nav.games">æ¸¸æˆ</a></li>
                            <li><a href="leaderboard.html" data-i18n="nav.leaderboard">æ’è¡Œæ¦œ</a></li>
                            <li class="lang-switcher">
                                <button class="lang-btn" id="langToggle" title="Switch Language">
                                    <span id="langIcon">ğŸŒ</span>
                                    <span id="langText">RU</span>
                                </button>
                            </li>
                        </ul>
                    </nav>
                    <div class="mobile-menu-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹ -->
        <main class="main">
            <section class="hero">
                <h2 data-i18n="hero.title">æ¬¢è¿æ¥åˆ°æœ¨å¤´çŒ«æ¸¸æˆä¸–ç•Œ</h2>
                <p data-i18n="hero.description">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å„ç§ç»å…¸æœ‰è¶£çš„å°æ¸¸æˆï¼Œéšæ—¶éšåœ°äº«å—æ¸¸æˆçš„ä¹è¶£ã€‚</p>
                <div class="cta-buttons">
                    <button class="btn-primary" onclick="startRandomGame()" data-i18n="hero.startGame">å¼€å§‹æ¸¸æˆ</button>
                </div>
            </section>

            <section class="games-section" id="games">
                <h3 data-i18n="section.games">ç²¾é€‰æ¸¸æˆ</h3>
                <div class="games-grid">
                    <div class="game-card" data-game="tetris" role="button" tabindex="0">
                        <div class="game-icon">ğŸ§©</div>
                        <h4 data-i18n="game.tetris">ä¿„ç½—æ–¯æ–¹å—</h4>
                        <p data-i18n="game.tetris.desc">ç»å…¸ç›Šæ™ºæ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty easy" data-i18n="difficulty.easy">ç®€å•</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="snake" role="button" tabindex="0">
                        <div class="game-icon">ğŸ</div>
                        <h4 data-i18n="game.snake">è´ªåƒè›‡</h4>
                        <p data-i18n="game.snake.desc">æ€€æ—§ç»å…¸ç©æ³•</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="minesweeper" role="button" tabindex="0">
                        <div class="game-icon">ğŸ’£</div>
                        <h4 data-i18n="game.minesweeper">æ‰«é›·</h4>
                        <p data-i18n="game.minesweeper.desc">æŒ‘æˆ˜é€»è¾‘æ€ç»´</p>
                        <div class="game-meta">
                            <span class="difficulty hard" data-i18n="difficulty.hard">å›°éš¾</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="2048" role="button" tabindex="0">
                        <div class="game-icon">ğŸ”¢</div>
                        <h4 data-i18n="game.2048">2048</h4>
                        <p data-i18n="game.2048.desc">æ•°å­—åˆå¹¶æŒ‘æˆ˜</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="chess" role="button" tabindex="0">
                        <div class="game-icon">â™Ÿï¸</div>
                        <h4 data-i18n="game.chess">å›½é™…è±¡æ£‹</h4>
                        <p data-i18n="game.chess.desc">ç­–ç•¥å¯¹æˆ˜æ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty hard" data-i18n="difficulty.hard">å›°éš¾</span>
                            <span class="players" data-i18n="players.2">2äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="checkers" role="button" tabindex="0">
                        <div class="game-icon">âšª</div>
                        <h4 data-i18n="game.checkers">è·³æ£‹</h4>
                        <p data-i18n="game.checkers.desc">ç»å…¸åŒäººå¯¹æˆ˜</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.2">2äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="tic-tac-toe" role="button" tabindex="0">
                        <div class="game-icon">âŒ</div>
                        <h4 data-i18n="game.tic-tac-toe">äº•å­—æ£‹</h4>
                        <p data-i18n="game.tic-tac-toe.desc">ç»å…¸ç­–ç•¥æ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty easy" data-i18n="difficulty.easy">ç®€å•</span>
                            <span class="players" data-i18n="players.2">2äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="memory-card" role="button" tabindex="0">
                        <div class="game-icon">ğŸƒ</div>
                        <h4 data-i18n="game.memory-card">è®°å¿†å¡ç‰Œ</h4>
                        <p data-i18n="game.memory-card.desc">è€ƒéªŒè®°å¿†èƒ½åŠ›</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="arkanoid" role="button" tabindex="0">
                        <div class="game-icon">âš¾</div>
                        <h4 data-i18n="game.arkanoid">æ‰“ç –å—</h4>
                        <p data-i18n="game.arkanoid.desc">ç»å…¸è¡—æœºæ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="spider-solitaire" role="button" tabindex="0">
                        <div class="game-icon">ğŸ•·ï¸</div>
                        <h4 data-i18n="game.spider-solitaire">èœ˜è››å¡ç‰Œ</h4>
                        <p data-i18n="game.spider-solitaire.desc">ç»å…¸çº¸ç‰Œæ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty hard" data-i18n="difficulty.hard">å›°éš¾</span>
                            <span class="players" data-i18n="players.1">1äºº</span>
                        </div>
                    </div>
                    <div class="game-card" data-game="tank-battle-phaser" role="button" tabindex="0">
                        <div class="game-icon">ğŸ®</div>
                        <h4 data-i18n="game.tank-battle-phaser">å¦å…‹å¤§æˆ˜</h4>
                        <p data-i18n="game.tank-battle-phaser.desc">ç»å…¸å°„å‡»å¯¹æˆ˜æ¸¸æˆ</p>
                        <div class="game-meta">
                            <span class="difficulty medium" data-i18n="difficulty.medium">ä¸­ç­‰</span>
                            <span class="players" data-i18n="players.2">2äºº</span>
                        </div>
                    </div>
                </div>
                                </section>

            <section class="features">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ®</div>
                    <h3 data-i18n="feature.richGames">ä¸°å¯Œæ¸¸æˆ</h3>
                    <p data-i18n="feature.richGames.desc">æ¶µç›–å„ç±»ç»å…¸æ¸¸æˆï¼Œæ»¡è¶³ä¸åŒç©å®¶çš„å–œå¥½</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“±</div>
                    <h3 data-i18n="feature.responsive">å“åº”å¼è®¾è®¡</h3>
                    <p data-i18n="feature.responsive.desc">å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿å’Œæ‰‹æœºè®¾å¤‡</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">â­</div>
                    <h3 data-i18n="feature.updates">æŒç»­æ›´æ–°</h3>
                    <p data-i18n="feature.updates.desc">å®šæœŸæ·»åŠ æ–°æ¸¸æˆï¼Œä¿æŒæ–°é²œæ„Ÿ</p>
                </div>
            </section>

            <!-- æ’è¡Œæ¦œéƒ¨åˆ† -->
            <section class="leaderboard-section" id="leaderboard">
                <h3 data-i18n="section.leaderboard">æ’è¡Œæ¦œ</h3>
                <div class="leaderboard-container">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th data-i18n="leaderboard.rank">æ’å</th>
                                <th data-i18n="leaderboard.player">ç©å®¶</th>
                                <th data-i18n="leaderboard.score">åˆ†æ•°</th>
                                <th data-i18n="leaderboard.game">æ¸¸æˆ</th>
                                <th data-i18n="leaderboard.date">æ—¥æœŸ</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                        </tbody>
                    </table>
                    <div class="leaderboard-loading" id="leaderboard-loading">
                        <p data-i18n="leaderboard.loading">æ­£åœ¨åŠ è½½æ’è¡Œæ¦œ...</p>
                    </div>
                    <div class="leaderboard-empty" id="leaderboard-empty" style="display: none;">
                        <p data-i18n="leaderboard.empty">æš‚æ— æ’è¡Œæ¦œæ•°æ®</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- æ’è¡Œæ¦œæäº¤æ¨¡æ€æ¡† -->
    <div id="score-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.submitScore">æäº¤åˆ†æ•°</h3>
                <span class="modal-close" id="score-modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <p data-i18n="modal.yourScore">æ‚¨çš„åˆ†æ•°: <span id="current-score">0</span></p>
                <p data-i18n="modal.game">æ¸¸æˆ: <span id="current-game">æœªçŸ¥</span></p>
                <div class="form-group">
                    <label for="player-name" data-i18n="modal.playerName">è¯·è¾“å…¥æ‚¨çš„æ˜µç§°:</label>
                    <input type="text" id="player-name" maxlength="20" data-i18n-placeholder="modal.placeholder" placeholder="è¾“å…¥æ˜µç§°">
                </div>
                <div class="modal-actions">
                    <button id="submit-score-btn" class="btn-primary" data-i18n="modal.submit">æäº¤åˆ†æ•°</button>
                    <button id="cancel-score-btn" class="btn-secondary" data-i18n="modal.cancel">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¿„è¯­å…¬å‘Šæ¨¡æ€æ¡† -->
    <div id="russian-notice-modal" class="modal-overlay russian-notice-modal" style="display: none;">
        <div class="modal-content russian-notice-content">
            <div class="modal-header russian-notice-header">
                <h3 data-i18n="russianNotice.title">é‡è¦å…¬å‘Š</h3>
                <span class="modal-close" id="russian-notice-close">&times;</span>
            </div>
            <div class="modal-body russian-notice-body">
                <div class="notice-icon">ğŸ“¢</div>
                <p class="notice-text" data-i18n="russianNotice.content">
                    æœ¬ç½‘ç«™ä¸ woodcat.io æ— ä»»ä½•å…³è”ã€‚æˆ‘ä»¬æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å°æ¸¸æˆåˆé›†ç½‘ç«™ï¼Œä¸å…¶ä»–ä»»ä½•ä½¿ç”¨ç±»ä¼¼åç§°çš„ç½‘ç«™æ— å…³ã€‚
                </p>
                <div class="notice-highlight">
                    <span data-i18n="russianNotice.highlight">è¯·å‹¿æ··æ·†</span>
                </div>
            </div>
            <div class="modal-footer russian-notice-footer">
                <button id="russian-notice-confirm" class="btn-primary" data-i18n="russianNotice.confirm">æˆ‘æ˜ç™½äº†</button>
            </div>
        </div>
    </div>

    <script type="module"  src="js/logger.js" defer></script>
    <script type="module"  src="js/cdnManager.js" defer></script>
    <script type="module"  src="js/lib/hammer.min.js" defer></script>
    <script type="module"  src="js/audioVibration.js" defer></script>
    <script type="module"  src="js/dataManager.js" defer></script>
    <script type="module"  src="js/scoreManager.js" defer></script>
    <script type="module"  src="js/modal.js" defer></script>
    <script type="module"  src="js/i18n.js" defer></script>
    <script>
        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function initLanguageSwitcher() {
            const langToggle = document.getElementById('langToggle');

            // è¯­è¨€åˆ‡æ¢äº‹ä»¶
            if (langToggle) {
                // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§äº‹ä»¶ç›‘å¬å™¨
                const newLangToggle = langToggle.cloneNode(true);
                langToggle.parentNode.replaceChild(newLangToggle, langToggle);
                
                // è·å–æ–°æŒ‰é’®ä¸­çš„langTextå…ƒç´ 
                const langText = newLangToggle.querySelector('#langText');

                // æ›´æ–°è¯­è¨€æŒ‰é’®æ˜¾ç¤º
                function updateLangButton() {
                    if (window.i18n) {
                        try {
                            const currentLang = window.i18n.getCurrentLanguage();
                            langText.textContent = currentLang === 'zh-CN' ? 'RU' : 'ä¸­æ–‡';
                        } catch (error) {
                            console.error('æ›´æ–°è¯­è¨€æŒ‰é’®æ˜¾ç¤ºæ—¶å‡ºé”™:', error);
                        }
                    } else {
                        console.warn('i18nå¯¹è±¡æœªåˆå§‹åŒ–');
                        // è®¾ç½®é»˜è®¤å€¼
                        langText.textContent = 'RU';
                    }
                }
                
                // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
                newLangToggle.addEventListener('click', function() {
                    if (window.i18n) {
                        try {
                            const currentLang = window.i18n.getCurrentLanguage();
                            const newLang = currentLang === 'zh-CN' ? 'ru' : 'zh-CN';
                            console.log('åˆ‡æ¢è¯­è¨€:', currentLang, '->', newLang);
                            window.i18n.setLanguage(newLang);
                            updateLangButton();
                        } catch (error) {
                            console.error('åˆ‡æ¢è¯­è¨€æ—¶å‡ºé”™:', error);
                        }
                    } else {
                        console.warn('i18nå¯¹è±¡æœªåˆå§‹åŒ–ï¼Œæ— æ³•åˆ‡æ¢è¯­è¨€');
                    }
                });

                // åˆå§‹åŒ–è¯­è¨€æŒ‰é’®
                updateLangButton();
            }
        }

        // ç­‰å¾…i18nå¯¹è±¡åˆå§‹åŒ–çš„å‡½æ•°
        function waitForI18n() {
            let attempts = 0;
            const maxAttempts = 10;
            const interval = 200;

            function checkI18n() {
                attempts++;
                if (window.i18n) {
                    initLanguageSwitcher();
                } else if (attempts < maxAttempts) {
                    setTimeout(checkI18n, interval);
                } else {
                    console.warn('i18nå¯¹è±¡åˆå§‹åŒ–è¶…æ—¶ï¼Œä½¿ç”¨é»˜è®¤è¯­è¨€è®¾ç½®');
                    initLanguageSwitcher(); // å³ä½¿i18næœªåˆå§‹åŒ–ä¹Ÿæ‰§è¡Œï¼Œè®¾ç½®é»˜è®¤å€¼
                }
            }

            checkI18n();
        }

        // ç¡®ä¿åœ¨DOMåŠ è½½å®Œæˆååˆå§‹åŒ–è¯­è¨€åˆ‡æ¢å™¨
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                // ç­‰å¾…i18nå¯¹è±¡åˆå§‹åŒ–å®Œæˆ
                waitForI18n();
            });
        } else {
            // ç«‹å³åˆå§‹åŒ–è¯­è¨€åˆ‡æ¢å™¨
            waitForI18n();
        }
    </script>
    <script type="module"  src="js/main.js" defer></script>
    <script type="module"  src="js/cdnLoader.js" defer></script>
    <!-- æ»šåŠ¨æ•ˆæœè„šæœ¬ -->
    <script>
        // æ·»åŠ æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (header) {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            }
        });
        
        // ç§»åŠ¨ç«¯èœå•æŒ‰é’®çŠ¶æ€åˆ‡æ¢
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navUl = document.querySelector('.nav ul');
        
        if (mobileMenuBtn && navUl) {
            mobileMenuBtn.addEventListener('click', function() {
                this.classList.toggle('active');
                if (navUl.style.display === 'flex') {
                    navUl.style.display = 'none';
                } else {
                    navUl.style.display = 'flex';
                }
            });
            
            // ç‚¹å‡»èœå•å¤–éƒ¨å…³é—­èœå•
            document.addEventListener('click', function(e) {
                if (!mobileMenuBtn.contains(e.target) && !navUl.contains(e.target)) {
                    mobileMenuBtn.classList.remove('active');
                    navUl.style.display = 'none';
                }
            });
        }
    </script>
    <!-- æ’è¡Œæ¦œç›¸å…³è„šæœ¬ï¼ˆåŠ¨æ€åŠ è½½ï¼‰ -->
    <!-- ä½¿ç”¨cdnLoader.jsè¦†ç›–é»˜è®¤çš„é…ç½®å’ŒSupabaseåº“åŠ è½½æ–¹å¼ -->

    <!-- PWAæ·»åŠ å¼•å¯¼æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="pwa-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ·»åŠ åˆ°ä¸»å±å¹•</h3>
                <button class="modal-close" id="pwa-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>æ‚¨å·²ç»æ¸¸ç©äº†å¤šä¸ªæ¸¸æˆï¼Œæ˜¯å¦å°†æœ¨å¤´çŒ«æ¸¸æˆåˆé›†æ·»åŠ åˆ°ä¸»å±å¹•ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°è®¿é—®ï¼Ÿ</p>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" id="pwa-yes">æ˜¯</button>
                <button class="btn-secondary" id="pwa-no">å¦</button>
            </div>
        </div>
    </div>

    <!-- è®¾å¤‡ç±»å‹é€‰æ‹©æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="device-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>é€‰æ‹©è®¾å¤‡ç±»å‹</h3>
                <button class="modal-close" id="device-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>è¯·é€‰æ‹©æ‚¨çš„è®¾å¤‡ç±»å‹ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨æä¾›ç›¸åº”çš„æ·»åŠ å¼•å¯¼ï¼š</p>
                <div style="display: flex; gap: 20px; justify-content: center; margin-top: 20px;">
                    <button class="btn-primary" style="padding: 20px;" id="device-iphone">iPhone/iPad</button>
                    <button class="btn-primary" style="padding: 20px;" id="device-android">Android</button>
                    <button class="btn-primary" style="padding: 20px;" id="device-desktop">æ¡Œé¢ç«¯</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ å¼•å¯¼æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="guide-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ·»åŠ åˆ°ä¸»å±å¹•å¼•å¯¼</h3>
                <button class="modal-close" id="guide-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="guide-content">
                <!-- å¼•å¯¼å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
            </div>
            <div class="modal-actions">
                <button class="btn-primary" id="guide-close">æˆ‘çŸ¥é“äº†</button>
            </div>
        </div>
    </div>

    <!-- ç‰ˆæƒå£°æ˜ -->
    <div class="copyright-notice">
        <p data-i18n="copyright">&copy; 2026 æœ¨å¤´çŒ« - ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
    </div>

    <!-- Service Worker Registration -->
    <script>
        // Register Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(function(error) {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }

        // Check for PWA installation capability
        let deferredPrompt;
        const addBtn = document.createElement('button');
        addBtn.style.display = 'none';
        document.body.appendChild(addBtn);

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            // Update UI to notify the user they can add to home screen
            addBtn.style.display = 'block';
            addBtn.textContent = 'æ·»åŠ åˆ°ä¸»å±å¹•';
            addBtn.addEventListener('click', () => {
                // Show the install prompt
                deferredPrompt.prompt();
                // Wait for the user to respond to the prompt
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the A2HS prompt');
                    } else {
                        console.log('User dismissed the A2HS prompt');
                    }
                    deferredPrompt = null;
                    addBtn.style.display = 'none';
                });
            });
        });

        // Listen for app installed event
        window.addEventListener('appinstalled', (evt) => {
            console.log('App installed successfully!');
            addBtn.style.display = 'none';
        });
    </script>
</body>
</html>