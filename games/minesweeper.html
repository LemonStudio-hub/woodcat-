<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰«é›· - æœ¨å¤´çŒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            color: #333;
            overflow-x: hidden;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 100%;
            width: 100%;
            max-width: 400px;
            margin: 10px 0;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            animation: containerPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        h1 {
            color: #2c3e50;
            margin: 10px 0 15px;
            text-align: center;
            font-size: 1.6rem;
            font-weight: 600;
            animation: fadeIn 0.6s ease-out;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 15px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            animation: slideIn 0.5s ease-out 0.1s both;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-box .label {
            color: #7f8c8d;
            font-size: 0.8rem;
        }
        
        .stat-box .value {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1rem;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            aspect-ratio: 1/1;
            width: 100%;
            max-width: 300px;
            border: 2px solid #7f8c8d;
            background: #7f8c8d;
            margin-bottom: 15px;
            padding: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .cell {
            width: 100%;
            height: 100%;
            background: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            border: 2px outset #bdc3c7;
            aspect-ratio: 1/1;
            position: relative;
            transition: all 0.2s ease;
            transform-style: preserve-3d;
        }
        
        .cell.revealed {
            background: #ecf0f1;
            border: 1px solid #95a5a6;
            transform: scale(0.95);
            animation: reveal 0.2s ease-out;
        }
        
        .cell.mine {
            background: #e74c3c;
        }
        
        .cell.flagged::before {
            content: 'ğŸš©';
            font-size: 16px;
            animation: flagPulse 1s infinite alternate;
        }
        
        .cell.marked-as-mine::before {
            content: 'ğŸš©';
            font-size: 16px;
            animation: flagPulse 1s infinite alternate;
        }
        
        .cell-0 { color: transparent; }
        .cell-1 { color: #3498db; }
        .cell-2 { color: #2ecc71; }
        .cell-3 { color: #e74c3c; }
        .cell-4 { color: #9b59b6; }
        .cell-5 { color: #e67e22; }
        .cell-6 { color: #1abc9c; }
        .cell-7 { color: #34495e; }
        .cell-8 { color: #d35400; }
        
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            width: 100%;
            animation: slideIn 0.5s ease-out 0.3s both;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 16px;
            font-size: 0.9rem;
            background: #7f8c8d;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            background: #95a5a6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .back-home {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #34495e;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 20;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            text-decoration: none;
        }
        
        .back-home:hover {
            background: #2c3e50;
            transform: scale(1.15) rotate(-10deg);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .back-home:active {
            transform: scale(1.05);
        }
        
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes containerPop {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }
        
        @keyframes reveal {
            0% { transform: scale(0.8); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes flagPulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
        
        @keyframes explode {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(0.8); opacity: 0.5; }
        }
        
        @keyframes winPulse {
            0% { box-shadow: 0 0 5px rgba(46, 204, 113, 0.5); }
            50% { box-shadow: 0 0 15px rgba(46, 204, 113, 0.8); }
            100% { box-shadow: 0 0 5px rgba(46, 204, 113, 0.5); }
        }
        
        .explosion {
            animation: explode 0.5s ease-out;
        }
        
        .win-glow {
            animation: winPulse 1.5s infinite;
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
                margin: 8px 0 12px;
            }
            
            .game-container {
                padding: 15px;
            }
            
            .game-board {
                max-width: 280px;
            }
            
            .cell {
                font-size: 12px;
            }
            
            .stat-box .label {
                font-size: 0.75rem;
            }
            
            .stat-box .value {
                font-size: 1rem;
            }
            
            button {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <a class="back-home" href="../index.html">â†</a>
    <div class="game-container">
        <h1>æ‰«é›·</h1>
        <div class="stats">
            <div class="stat-box">
                <div class="label">å‰©ä½™é›·æ•°</div>
                <div class="value" id="mines-count">15</div>
            </div>
            <div class="stat-box">
                <div class="label">å·²æ ‡è®°</div>
                <div class="value" id="flags-count">0</div>
            </div>
            <div class="stat-box">
                <div class="label">æ—¶é—´</div>
                <div class="value" id="timer">0</div>
            </div>
            <div class="stat-box">
                <div class="label">æœ€ä½³</div>
                <div class="value" id="best-time">-</div>
            </div>
        </div>
        <div class="game-board" id="board"></div>
        <div class="controls">
            <div class="buttons">
                <button id="resetBtn">æ–°æ¸¸æˆ</button>
            </div>
        </div>
    </div>

    <script src="../js/data-manager.js"></script>
    <script>
        // æ‰«é›·æ ¸å¿ƒæ¸¸æˆé€»è¾‘
        document.addEventListener('DOMContentLoaded', () => {
            // æ¸¸æˆé…ç½®
            const DIFFICULTY = { rows: 10, cols: 10, mines: 15 };
            
            let rows, cols, mines;
            let board = [];
            let revealed = 0;
            let gameOver = false;
            let gameStarted = false;
            let timerInterval;
            let seconds = 0;
            let flags = 0; // å·²æ ‡è®°çš„æ——å­æ•°é‡
            let correctFlags = 0; // æ­£ç¡®æ ‡è®°çš„é›·æ•°
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                rows = DIFFICULTY.rows;
                cols = DIFFICULTY.cols;
                mines = DIFFICULTY.mines;
                
                // é‡ç½®æ¸¸æˆçŠ¶æ€
                board = [];
                revealed = 0;
                gameOver = false;
                gameStarted = false;
                seconds = 0;
                flags = 0; // é‡ç½®æ ‡è®°æ•°
                correctFlags = 0; // é‡ç½®æ­£ç¡®æ ‡è®°æ•°
                
                // æ¸…é™¤è®¡æ—¶å™¨
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                
                // åˆ›å»ºæ¸¸æˆæ¿
                createBoard();
                
                // æ›´æ–°UI
                document.getElementById('mines-count').textContent = mines;
                document.getElementById('flags-count').textContent = flags;
                document.getElementById('timer').textContent = seconds;
            }
            
            // åˆ›å»ºæ¸¸æˆæ¿
            function createBoard() {
                const boardElement = document.getElementById('board');
                boardElement.innerHTML = '';
                boardElement.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
                boardElement.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
                
                // åˆå§‹åŒ–äºŒç»´æ•°ç»„
                board = Array.from({ length: rows }, () => 
                    Array.from({ length: cols }, () => ({
                        isMine: false,
                        isRevealed: false,
                        isFlagged: false,
                        neighborCount: 0
                    }))
                );
                
                // åˆ›å»ºæ ¼å­å…ƒç´ 
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.x = x;
                        cell.dataset.y = y;
                        
                        // è§¦æ‘¸å¼€å§‹äº‹ä»¶ - ç”¨äºæ£€æµ‹é•¿æŒ‰
                        let longPressTimer = null;
                        let isLongPress = false;
                        
                        cell.addEventListener('touchstart', (e) => {
                            isLongPress = false; // é‡ç½®é•¿æŒ‰çŠ¶æ€
                            longPressTimer = setTimeout(() => {
                                handleRightClick(x, y); // é•¿æŒ‰æ—¶æ ‡è®°
                                isLongPress = true;
                                longPressTimer = null;
                            }, 500); // 500ms é•¿æŒ‰
                        });
                        
                        cell.addEventListener('touchmove', () => {
                            if (longPressTimer) {
                                clearTimeout(longPressTimer);
                                longPressTimer = null;
                            }
                        });
                        
                        // è§¦æ‘¸ç»“æŸäº‹ä»¶ - å¤„ç†çŸ­æŒ‰ï¼ˆç‚¹å‡»ï¼‰
                        cell.addEventListener('touchend', (e) => {
                            if (longPressTimer) {
                                clearTimeout(longPressTimer);
                                longPressTimer = null;
                                
                                // åªæœ‰åœ¨ä¸æ˜¯é•¿æŒ‰çš„æƒ…å†µä¸‹æ‰å¤„ç†ç‚¹å‡»
                                if (!isLongPress) {
                                    setTimeout(() => {
                                        handleCellClick(x, y);
                                    }, 10); // å°å»¶è¿Ÿç¡®ä¿è§¦æ‘¸äº‹ä»¶å·²ç»å¤„ç†
                                }
                            }
                        });
                        
                        // é˜²æ­¢è§¦æ‘¸æ—¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå¦‚æ»šåŠ¨ï¼‰
                        cell.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                        }, { passive: false });
                        
                        // PCç«¯äº‹ä»¶
                        cell.addEventListener('click', (e) => {
                            e.preventDefault();
                            handleCellClick(x, y);
                        });
                        
                        // å³é”®ç‚¹å‡»äº‹ä»¶ï¼ˆPCç«¯æ ‡è®°ï¼‰
                        cell.addEventListener('contextmenu', (e) => {
                            e.preventDefault();
                            handleRightClick(x, y);
                        });
                        
                        boardElement.appendChild(cell);
                    }
                }
            }
            
            // æ”¾ç½®åœ°é›·
            function placeMines(firstX, firstY) {
                let minesPlaced = 0;
                
                while (minesPlaced < mines) {
                    const x = Math.floor(Math.random() * cols);
                    const y = Math.floor(Math.random() * rows);
                    
                    // ç¡®ä¿ä¸åœ¨ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„ä½ç½®åŠå…¶å‘¨å›´æ”¾ç½®åœ°é›·
                    const isFirstClickArea = Math.abs(x - firstX) <= 1 && Math.abs(y - firstY) <= 1;
                    
                    if (!board[y][x].isMine && !isFirstClickArea) {
                        board[y][x].isMine = true;
                        minesPlaced++;
                        
                        // æ›´æ–°å‘¨å›´æ ¼å­çš„é‚»è¿‘åœ°é›·æ•°
                        for (let dy = -1; dy <= 1; dy++) {
                            for (let dx = -1; dx <= 1; dx++) {
                                const nx = x + dx;
                                const ny = y + dy;
                                
                                if (nx >= 0 && nx < cols && ny >= 0 && ny < rows && !board[ny][nx].isMine) {
                                    board[ny][nx].neighborCount++;
                                }
                            }
                        }
                    }
                }
            }
            
            // å¤„ç†æ ¼å­ç‚¹å‡»
            function handleCellClick(x, y) {
                if (gameOver || board[y][x].isRevealed || board[y][x].isFlagged) return;
                
                // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œæ”¾ç½®åœ°é›·
                if (!gameStarted) {
                    placeMines(x, y);
                    gameStarted = true;
                    startTimer();
                }
                
                revealCell(x, y);
                
                if (board[y][x].isMine) {
                    // æ¸¸æˆç»“æŸ
                    gameOver = true;
                    cell.classList.add('explosion'); // æ·»åŠ çˆ†ç‚¸åŠ¨ç”»
                    revealAllMines();
                    clearInterval(timerInterval);
                    setTimeout(() => {
                        alert('è¸©åˆ°åœ°é›·äº†ï¼æ¸¸æˆç»“æŸã€‚');
                    }, 100);
                } else {
                    // æ£€æŸ¥æ˜¯å¦èƒœåˆ© - æ­å¼€æ‰€æœ‰éé›·æ ¼å­
                    checkWinCondition();
                }
            }
            
            // æ£€æŸ¥èƒœåˆ©æ¡ä»¶
            function checkWinCondition() {
                // ç»Ÿè®¡å·²æ­å¼€çš„æ ¼å­æ•°
                let revealedCount = 0;
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        if (board[y][x].isRevealed) {
                            revealedCount++;
                        }
                    }
                }
                
                // å¦‚æœå·²æ­å¼€çš„æ ¼å­æ•°ç­‰äºéé›·æ ¼å­æ•°ï¼Œåˆ™èƒœåˆ©
                if (revealedCount === rows * cols - mines) {
                    gameOver = true;
                    clearInterval(timerInterval);
                    
                    // æ£€æŸ¥å¹¶æ›´æ–°æœ€ä½³æ—¶é—´è®°å½•
                    if (seconds < bestTime) {
                        bestTime = seconds;
                        gameDataManager.saveData('minesweeper', 'bestTime', bestTime);
                        document.getElementById('best-time').textContent = bestTime;
                    }
                    
                    // ä¸ºæ‰€æœ‰æ ¼å­æ·»åŠ è·èƒœåŠ¨ç”»
                    const cells = document.querySelectorAll('.cell');
                    cells.forEach(cell => {
                        cell.classList.add('win-glow');
                    });
                    
                    setTimeout(() => {
                        alert('æ­å–œï¼ä½ æˆåŠŸæ¸…é™¤äº†æ‰€æœ‰åœ°é›·ï¼');
                    }, 100);
                }
            }
            
            // å¤„ç†å³é”®ç‚¹å‡»ï¼ˆæ ‡è®°ï¼‰- ç”¨äºPCå’Œç§»åŠ¨ç«¯é•¿æŒ‰
            function handleRightClick(x, y) {
                if (gameOver || board[y][x].isRevealed) return;
                
                const cell = document.querySelector(`.cell[data-x="${x}"][data-y="${y}"]`);
                
                if (!board[y][x].isFlagged) {
                    // å¦‚æœè¿˜æœ‰å‰©ä½™çš„é›·å¯ä»¥æ ‡è®°
                    if (flags < mines) {
                        board[y][x].isFlagged = true;
                        cell.classList.add('flagged');
                        flags++;
                        
                        // æ£€æŸ¥æ˜¯å¦æ ‡è®°çš„æ˜¯çœŸæ­£çš„åœ°é›·
                        if (board[y][x].isMine) {
                            correctFlags++;
                        }
                    }
                } else {
                    board[y][x].isFlagged = false;
                    cell.classList.remove('flagged');
                    flags--;
                    
                    // å¦‚æœä¹‹å‰æ ‡è®°çš„æ˜¯çœŸæ­£çš„åœ°é›·ï¼Œå‡å°‘æ­£ç¡®æ ‡è®°æ•°
                    if (board[y][x].isMine) {
                        correctFlags--;
                    }
                }
                
                // æ›´æ–°æ ‡è®°è®¡æ•°
                updateFlagsCount();
                
                // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰åœ°é›·éƒ½è¢«æ­£ç¡®æ ‡è®°
                if (correctFlags === mines) {
                    // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰éé›·æ ¼å­éƒ½å·²æ­å¼€
                    let allNonMinesRevealed = true;
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            if (!board[y][x].isMine && !board[y][x].isRevealed) {
                                allNonMinesRevealed = false;
                                break;
                            }
                        }
                        if (!allNonMinesRevealed) break;
                    }
                    
                    // å¦‚æœæ‰€æœ‰é›·éƒ½è¢«æ­£ç¡®æ ‡è®°ä¸”æ‰€æœ‰éé›·æ ¼å­å·²æ­å¼€ï¼Œåˆ™èƒœåˆ©
                    if (allNonMinesRevealed) {
                        gameOver = true;
                        clearInterval(timerInterval);
                        
                        // ä¸ºæ‰€æœ‰æ ¼å­æ·»åŠ è·èƒœåŠ¨ç”»
                        const cells = document.querySelectorAll('.cell');
                        cells.forEach(cell => {
                            cell.classList.add('win-glow');
                        });
                        
                        setTimeout(() => {
                            alert('æ­å–œï¼ä½ æˆåŠŸæ¸…é™¤äº†æ‰€æœ‰åœ°é›·ï¼');
                        }, 100);
                    }
                }
            }
            
            // æ›´æ–°æ ‡è®°è®¡æ•°æ˜¾ç¤º
            function updateFlagsCount() {
                document.getElementById('flags-count').textContent = flags;
                // è®¡ç®—å‰©ä½™é›·æ•°ï¼ˆä»…å½“æ ‡è®°æ­£ç¡®æ—¶æ‰å‡å°‘ï¼‰
                const remainingMines = mines - correctFlags;
                document.getElementById('mines-count').textContent = remainingMines;
            }
            
            // æ­å¼€æ ¼å­
            function revealCell(x, y) {
                if (x < 0 || x >= cols || y < 0 || y >= rows) return;
                if (board[y][x].isRevealed || board[y][x].isFlagged) return;
                
                const cell = document.querySelector(`.cell[data-x="${x}"][data-y="${y}"]`);
                board[y][x].isRevealed = true;
                cell.classList.add('revealed');
                revealed++;
                
                if (board[y][x].isMine) {
                    cell.classList.add('mine');
                    cell.textContent = 'ğŸ’£';
                } else if (board[y][x].neighborCount > 0) {
                    cell.textContent = board[y][x].neighborCount;
                    cell.classList.add(`cell-${board[y][x].neighborCount}`);
                } else {
                    // é€’å½’æ­å¼€å‘¨å›´æ ¼å­
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            revealCell(x + dx, y + dy);
                        }
                    }
                }
            }
            
            // æ­å¼€æ‰€æœ‰åœ°é›·
            function revealAllMines() {
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        if (board[y][x].isMine) {
                            const cell = document.querySelector(`.cell[data-x="${x}"][data-y="${y}"]`);
                            if (!cell.classList.contains('flagged')) {
                                cell.classList.add('revealed', 'mine', 'explosion');
                                cell.textContent = 'ğŸ’£';
                            }
                        }
                    }
                }
            }
            
            // å¼€å§‹è®¡æ—¶
            function startTimer() {
                timerInterval = setInterval(() => {
                    seconds++;
                    document.getElementById('timer').textContent = seconds;
                }, 1000);
            }
            
            // è®°å½•æœ€ä½³æ—¶é—´
            let bestTime = Infinity; // åˆå§‹åŒ–ä¸ºæ— ç©·å¤§
            // å¼‚æ­¥åŠ è½½æœ€ä½³æ—¶é—´
            gameDataManager.loadData('minesweeper', 'bestTime', Infinity).then(loadedBestTime => {
                bestTime = loadedBestTime;
                // æ˜¾ç¤ºæœ€ä½³æ—¶é—´ï¼Œå¦‚æœä¸ºInfinityåˆ™æ˜¾ç¤º"-"
                document.getElementById('best-time').textContent = bestTime === Infinity ? '-' : bestTime;
            });
            
            // é‡ç½®æ¸¸æˆ
            document.getElementById('resetBtn').addEventListener('click', initGame);
            
            // é‡å†™è¿”å›ä¸»é¡µæŒ‰é’®çš„é€»è¾‘ï¼Œæ·»åŠ æäº¤åˆ†æ•°é€‰é¡¹
            const backHomeButton = document.querySelector('.back-home');
            if (backHomeButton) {
                backHomeButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // å¦‚æœæ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯¢é—®æ˜¯å¦ä¿å­˜
                    if (gameStarted && !gameOver) {
                        const shouldSave = confirm(`å½“å‰ç”¨æ—¶: ${seconds}ç§’\næ˜¯å¦å°†å½“å‰è¿›åº¦æ·»åŠ åˆ°æ’è¡Œæ¦œï¼Ÿ`);
                        if (shouldSave) {
                            // è·³è½¬åˆ°ä¸»é¡µå¹¶å¸¦ä¸Šæ—¶é—´ã€æ¸¸æˆç±»å‹å’ŒçŠ¶æ€å‚æ•°
                            window.location.href = `../index.html?score=${seconds}&game=minesweeper`;
                        } else {
                            // ç›´æ¥è¿”å›ä¸»é¡µ
                            window.location.href = `../index.html`;
                        }
                    } else if (gameOver) {
                        // æ¸¸æˆç»“æŸæ—¶ï¼Œè¯¢é—®æ˜¯å¦æäº¤æœ€ç»ˆæ—¶é—´
                        const shouldSave = confirm(`æ¸¸æˆç»“æŸï¼ç”¨æ—¶: ${seconds}ç§’\næ˜¯å¦å°†æ­¤æˆç»©æ·»åŠ åˆ°æ’è¡Œæ¦œï¼Ÿ`);
                        if (shouldSave) {
                            window.location.href = `../index.html?score=${seconds}&game=minesweeper`;
                        } else {
                            window.location.href = `../index.html`;
                        }
                    } else {
                        // å¦‚æœæ²¡æœ‰è¿›è¡Œæ¸¸æˆï¼Œç›´æ¥è¿”å›ä¸»é¡µ
                        window.location.href = `../index.html`;
                    }
                });
            }
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        });
    </script>
</body>
</html>